(this["webpackJsonpdiscord-clone"]=this["webpackJsonpdiscord-clone"]||[]).push([[4],[,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n(68),c=n(7),a=n(25);Object(r.a)({apiKey:"AIzaSyC8GZMfCxqOUIFsa2OYlXcMzfQKfAobukQ",authDomain:"bread-8adf4.firebaseapp.com",databaseURL:"https://bread-8adf4-default-rtdb.firebaseio.com",projectId:"bread-8adf4",storageBucket:"bread-8adf4.appspot.com",messagingSenderId:"163895954776",appId:"1:163895954776:web:81bdb5187f320d28a4692d"});var s=Object(c.c)(),u=Object(a.c)()},,,,,,,,function(e,t,n){"use strict";n.d(t,"n",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"l",(function(){return m})),n.d(t,"d",(function(){return S})),n.d(t,"a",(function(){return g})),n.d(t,"i",(function(){return V})),n.d(t,"e",(function(){return T})),n.d(t,"b",(function(){return I})),n.d(t,"j",(function(){return N})),n.d(t,"m",(function(){return R})),n.d(t,"k",(function(){return P})),n.d(t,"o",(function(){return B})),n.d(t,"g",(function(){return y})),n.d(t,"f",(function(){return L})),n.d(t,"c",(function(){return j}));var r=n(3),c=n(0),a=n(2),s=n(7),u=n(18),i=n(25),o=n(41),b=n(11),l=n(40);function j(e){return f.apply(this,arguments)}function f(){return(f=Object(a.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(l.d)({dictionaries:[l.a,l.c,l.b]}),e.next=3,g("".concat(n,"@email.com"),n,n,null,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){var t=Object(u.d)();Object(u.h)(t,e)}function O(e){var t=Object(s.m)(b.a,"users/".concat(e,"/channels"));Object(s.f)(t)}function d(e,t){return h.apply(this,arguments)}function h(){return(h=Object(a.a)(Object(c.a)().mark((function e(t,n){var r,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(i.d)(b.b,"user_avatars/".concat(t)),e.next=3,Object(i.e)(r,n);case 3:return e.next=5,Object(i.b)(r);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t,n,r){return v.apply(this,arguments)}function v(){return(v=Object(a.a)(Object(c.a)().mark((function e(t,n,a,s){var i,o,b;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object(u.d)(),o=i.currentUser,e.t0=t,e.next="displayName"===e.t0?5:"avatar"===e.t0?8:"color"===e.t0?11:"email"===e.t0?14:"password"===e.t0?17:20;break;case 5:return e.next=7,Object(u.m)(o,{displayName:n});case 7:return e.abrupt("break",21);case 8:return e.next=10,Object(u.m)(o,{photoURL:n});case 10:return e.abrupt("break",21);case 11:return e.next=13,x(o.uid,n);case 13:return e.abrupt("break",21);case 14:return e.next=16,Object(u.k)(o,n);case 16:return e.abrupt("break",21);case 17:return e.next=19,Object(u.l)(o,n);case 19:return e.abrupt("break",21);case 20:return e.abrupt("return");case 21:return s&&s.length>0&&(b=Object(r.a)({},t,n),w(o.uid,s,b)),e.next=24,Object(u.g)(o);case 24:a(o);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){var n=["rgb(92, 100, 244)","rgb(237, 66, 69)","rgb(250, 166, 26)"];t=t||n[Math.floor(Math.random()*n.length)];var r=Object(s.m)(b.a,"users/".concat(e));return Object(s.q)(r,{color:t}),t}function w(e,t,n){t.forEach(function(){var t=Object(a.a)(Object(c.a)().mark((function t(r){return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.q)(Object(s.m)(b.a,"Channels/".concat(r.id,"/users/").concat(e)),n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}function y(e,t){return k.apply(this,arguments)}function k(){return(k=Object(a.a)(Object(c.a)().mark((function e(t,n){var r,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(u.d)(),a=r.currentUser,e.prev=2,e.next=5,Object(u.c)(a);case 5:Object(s.n)(Object(s.m)(b.a,"users/".concat(a.uid)),null),w(a.uid,t,null),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n&&n(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function g(e,t,n,r,c){return C.apply(this,arguments)}function C(){return(C=Object(a.a)(Object(c.a)().mark((function e(t,n,r,a,s){var i,o,b;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(u.d)(),e.next=3,Object(u.b)(i,t,n);case 3:return o=e.sent,e.next=6,Object(u.m)(o.user,{displayName:r});case 6:return e.next=8,x(o.user.uid);case 8:return b=e.sent,o.user.color=b,a&&N(o.user,a),s&&s(o.user),e.abrupt("return",o.user);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t){return E.apply(this,arguments)}function E(){return(E=Object(a.a)(Object(c.a)().mark((function e(t,n){var r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(u.d)(),e.next=3,Object(u.i)(r,t,n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t,n){return U.apply(this,arguments)}function U(){return(U=Object(a.a)(Object(c.a)().mark((function e(t,n,r){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a={})["users/".concat(t.uid,"/channels/").concat(n)]="",a["Channels/".concat(n,"/users/").concat(t.uid)]={role:r||null,displayName:t.displayName,avatar:t.photoURL||"",color:t.color},e.next=5,Object(s.q)(Object(s.m)(b.a),a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,n,r){return M.apply(this,arguments)}function M(){return M=Object(a.a)(Object(c.a)().mark((function e(t,n,r,u){var i;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:i=Object(s.m)(b.a,"users/".concat(t,"/")),Object(s.h)(i,function(){var e=Object(a.a)(Object(c.a)().mark((function e(t){var s,i,b;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b=function(){return(b=Object(a.a)(Object(c.a)().mark((function e(){var t,r,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in a=function(e,n){n.forEach((function(n,r){return t[r][e]=n}))},t=[],s.channels)t.push({id:r,role:s.channels[r]});return e.next=5,Promise.all([Object(o.h)("icon",t,a),Object(o.h)("name",t,a),Object(o.h)("defaultRoom",t,a)]);case 5:n(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)},i=function(){return b.apply(this,arguments)},s=t.val()){e.next=5;break}return e.abrupt("return");case 5:r(s.color),i(),u(s.mentions);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function R(e,t){var n=Object(s.m)(b.a,".info/connected");t.forEach((function(t){var r=Object(s.m)(b.a,"Channels/".concat(t.id,"/users/").concat(e));Object(s.h)(n,function(){var t=Object(a.a)(Object(c.a)().mark((function t(a){return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return!1===a.val()&&(Object(s.f)(n),O(e)),t.next=3,Object(s.g)(r).update({status:"offline"});case 3:Object(s.q)(r,{status:"online"});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}function P(e,t,n,r){return q.apply(this,arguments)}function q(){return(q=Object(a.a)(Object(c.a)().mark((function e(t,n,r,a){var u;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=Object(s.m)(b.a,"users/".concat(t,"/mentions/").concat(n,"/").concat(r,"/").concat(a)),e.next=3,Object(s.n)(u,!0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,n){return _.apply(this,arguments)}function _(){return(_=Object(a.a)(Object(c.a)().mark((function e(t,n,r){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(s.m)(b.a,"users/".concat(t,"/mentions/").concat(n,"/").concat(r)),e.next=3,Object(s.n)(a,null);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){var t=Object(s.m)(b.a,"users/".concat(e,"/isOnline"));return Object(s.b)(t)}function B(e){return F.apply(this,arguments)}function F(){return(F=Object(a.a)(Object(c.a)().mark((function e(t){var n,r,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(u.d)(),r=n.currentUser){e.next=4;break}return e.abrupt("return",{isValid:!0});case 4:return e.prev=4,a=u.a.credential(r.email,t),e.next=8,Object(u.f)(r,a);case 8:if(!e.sent){e.next=11;break}return e.abrupt("return",{isValid:!0});case 11:return e.abrupt("return",{error:"something went wrong"});case 14:return e.prev=14,e.t0=e.catch(4),e.abrupt("return",{error:e.t0.message});case 17:case"end":return e.stop()}}),e,null,[[4,14]])})))).apply(this,arguments)}function L(){return D.apply(this,arguments)}function D(){return(D=Object(a.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(u.d)(),Object(u.j)(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(8),c=Object(r.createContext)(null)},function(e,t,n){"use strict";var r=n(0),c=n(2),a=n(12),s=n(8),u=n(13),i=n(3),o=n(15),b=n(19);function l(e){return/\S+@\S+\.\S+/.test(e)?{isValid:!0}:{error:"Not a valid email"}}function j(e){return e.length<6?{isValid:!1,error:"Must be 6 or more in length"}:{isValid:!0}}function f(e,t){return e===t?{isValid:!0}:{error:"Passwords don't match"}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;switch(!0){case e.name.includes("username"):return e.value.length>0?{isValid:!0}:{error:"username is empty"};case e.name.includes("room_name"):return e.value.length>0?{isValid:!0}:{error:"room name is empty"};case e.name.includes("email"):return l(e.value);case e.name.includes("password"):var r=j(e.value);return r.error?r:"confirm_password"===e.name?f(e.value,n):"current_password"!==e.name&&"password"!==e.name||!t?{isValid:!0}:Object(b.o)(e.value);default:return{isValid:!0}}}var O=n(62),d=n(49),h=n(6);t.a=function(e){var t=e.fields,n=e.inputValues,b=e.actionBtnText,l=e.noCancelBtn,j=e.cancelBtnText,f=e.handleChange,m=e.submitAction,v=e.cleanUp,x=e.close,w=e.setError,y=Object(s.useRef)(),k=function(e){var t=Object(s.useState)((function(){return e.reduce((function(e,t){return e[t]="",e}),{})})),n=Object(a.a)(t,2),b=n[0],l=n[1];function j(e){return f.apply(this,arguments)}function f(){return f=Object(c.a)(Object(r.a)().mark((function e(t){var n,c,a,s,u=arguments;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]&&u[1],!(c=u.length>2&&void 0!==u[2]?u[2]:void 0)){e.next=8;break}return e.next=5,p(t,n,c);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,p(t,n);case 10:e.t0=e.sent;case 11:return a=e.t0,s=a.error?a.error:"",l((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(i.a)({},t.name,s))})),e.abrupt("return",!a.error);case 15:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function O(){return(O=Object(c.a)(Object(r.a)().mark((function t(n,c,a,s){var i,o,b,l,f,p;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),i=n.target.elements,t.prev=2,o=!1,b=Object(u.a)(e),t.prev=5,b.s();case 7:if((l=b.n()).done){t.next=23;break}if(f=l.value,p=i.namedItem(f),"confirm_password"!==f){t.next=16;break}return t.next=13,j(p,!0,i.namedItem("new_password").value);case 13:t.t0=t.sent,t.next=19;break;case 16:return t.next=18,j(p,!0);case 18:t.t0=t.sent;case 19:t.t0||(o=!0);case 21:t.next=7;break;case 23:t.next=28;break;case 25:t.prev=25,t.t1=t.catch(5),b.e(t.t1);case 28:return t.prev=28,b.f(),t.finish(28);case 31:if(!o){t.next=33;break}return t.abrupt("return");case 33:return t.next=35,c();case 35:a(),t.next=41;break;case 38:t.prev=38,t.t2=t.catch(2),s&&s(t.t2.message);case 41:case"end":return t.stop()}}),t,null,[[2,38],[5,25,28,31]])})))).apply(this,arguments)}return{inputError:b,validateInput:j,submitForm:function(e,t,n,r){return O.apply(this,arguments)}}}(t.map((function(e){return e.name}))),g=k.inputError,C=k.validateInput,V=k.submitForm,E=Object(s.useState)(!1),N=Object(a.a)(E,2),U=N[0],S=N[1],M=Object(s.useRef)(!1);return Object(s.useEffect)((function(){return M.current=!0,function(){return M.current=!1}}),[]),Object(h.jsxs)("form",{ref:y,autoComplete:"nope",onSubmit:function(){var e=Object(c.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),v=v||x,e.next=4,V(t,m,v,w);case 4:M.current&&S(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(h.jsxs)("div",{className:"content",children:[Object(h.jsx)("input",{type:"password",hidden:!0}),t.map((function(e,t){return"dropdown"===e.type?Object(h.jsx)("select",{name:e.name,children:e.options.map((function(e){return Object(h.jsx)("option",{value:e.value,children:e.display},e.value)}))}):Object(h.jsx)(O.a,{type:e.type,autoFocus:0===t,onBlur:function(e){return C(e.currentTarget)},error:g[e.name],label:e.label,name:e.name,onChange:f,value:n[e.name]||""},t)}))]}),Object(h.jsx)("footer",{children:Object(h.jsxs)("div",{className:U?"btn-ctn no-pointer-events":"btn-ctn",children:[!l&&Object(h.jsx)(d.a,{text:j||"Cancel",isUnderline:!0,onClick:x}),Object(h.jsx)(d.a,{type:"submit",text:b||"Done",className:"filled small",loading:U})]})})]})}},,,,,,,,,,function(e,t,n){"use strict";n.d(t,"i",(function(){return V})),n.d(t,"j",(function(){return O})),n.d(t,"b",(function(){return l})),n.d(t,"g",(function(){return x})),n.d(t,"h",(function(){return g})),n.d(t,"d",(function(){return N})),n.d(t,"m",(function(){return S})),n.d(t,"c",(function(){return y})),n.d(t,"e",(function(){return q})),n.d(t,"f",(function(){return v})),n.d(t,"l",(function(){return f})),n.d(t,"a",(function(){return _})),n.d(t,"k",(function(){return T})),n.d(t,"n",(function(){return R}));var r=n(3),c=n(17),a=n(15),s=n(0),u=n(2),i=n(7),o=n(25),b=n(11);n(19);function l(e,t,n){return j.apply(this,arguments)}function j(){return(j=Object(u.a)(Object(s.a)().mark((function e(t,n,r){var c,a,u;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(i.m)(b.a,"Channels"),a=Object(i.k)(c),e.next=4,Object(i.n)(a,{name:t});case 4:if(!r){e.next=10;break}return e.next=7,h(a.key,r);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0="";case 11:if(u=e.t0,!n){e.next=15;break}return e.next=15,Object(i.n)(Object(i.m)(b.a,"public_channels/".concat(a.key)),{name:t,icon:u,description:"This is a new channel and there is no description for it at the moment."});case 15:return e.next=17,y(a.key,"general",null);case 17:return e.abrupt("return",a.key);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return p.apply(this,arguments)}function p(){return(p=Object(u.a)(Object(s.a)().mark((function e(t){var n,r,c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.b)(Object(i.l)(Object(i.m)(b.a,"/public_channels/"),Object(i.i)("name"),Object(i.p)(t)));case 2:return n=e.sent,r=n.val(),c=Object.keys(r).map((function(e){return Object(a.a)(Object(a.a)({},r[e]),{},{id:e})})),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return d.apply(this,arguments)}function d(){return(d=Object(u.a)(Object(s.a)().mark((function e(t,n){var r,c,u;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="init"===e.t0?3:"next"===e.t0?7:"prev"===e.t0?11:15;break;case 3:return e.next=5,Object(i.b)(Object(i.l)(Object(i.m)(b.a,"public_channels/"),Object(i.d)(20)));case 5:case 9:case 13:return r=e.sent,e.abrupt("break",16);case 7:return e.next=9,Object(i.b)(Object(i.l)(Object(i.m)(b.a,"public_channels/"),Object(i.j)(),Object(i.o)(n),Object(i.d)(20)));case 11:return e.next=13,Object(i.b)(Object(i.l)(Object(i.m)(b.a,"public_channels/"),Object(i.j)(),Object(i.a)(n),Object(i.e)(20)));case 15:return e.abrupt("return");case 16:if(c=r.val()){e.next=19;break}return e.abrupt("return");case 19:return u=Object.keys(c).map((function(e){return Object(a.a)(Object(a.a)({},c[e]),{},{id:e})})),e.abrupt("return",u);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t){return m.apply(this,arguments)}function m(){return(m=Object(u.a)(Object(s.a)().mark((function e(t,n){var r,c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(o.d)(b.b,"channel_icons/".concat(t)),e.next=3,Object(o.e)(r,n);case 3:return e.next=5,Object(o.b)(r);case 5:return c=e.sent,e.next=8,Object(i.q)(Object(i.m)(b.a,"Channels/".concat(t)),{icon:c});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){var n=Object(i.m)(b.a,"Channels/".concat(e));Object(i.f)(n)}function x(e,t,n,r,c,a,s,u){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(Object(s.a)().mark((function e(t,n,r,u,o,l,j,f){var p;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{p=Object(i.m)(b.a,"Channels/".concat(t)),Object(i.h)(p,(function(e){var t=e.val();n(t.name,t.icon||"");var s=t.room_categories?Object.keys(t.room_categories):[];r(["none"].concat(Object(c.a)(s)));var i=[];!function(e){for(var t in e)i.push(Object(a.a)(Object(a.a)({},e[t]),{},{id:t}))}(t.rooms),u(i);var b=t.user_roles?Object.keys(t.user_roles):[];o([].concat(Object(c.a)(b),["Online"]));var f=[];!function(e){for(var t in e){var n=Object(a.a)(Object(a.a)({},e[t]),{},{uid:t});f.push(n)}}(t.users),l(f);var p=f.filter((function(e){return"online"===e.status}));j(p)}))}catch(s){f&&f(s.message)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t,n){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(Object(s.a)().mark((function e(t,n,r){var c,a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(i.m)(b.a,"Channels/".concat(t,"/rooms")),a=Object(i.k)(c),e.next=4,Object(i.n)(a,{name:n,category:r});case 4:return e.next=6,Object(i.n)(Object(i.m)(b.a,"Rooms/".concat(a.key)),{name:n});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t,n){return C.apply(this,arguments)}function C(){return(C=Object(u.a)(Object(s.a)().mark((function e(t,n,r){var c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map((function(e){var n;switch(t){case"name":n=Object(i.m)(b.a,"Channels/".concat(e.id,"/name"));break;case"icon":n=Object(i.m)(b.a,"Channels/".concat(e.id,"/icon"));break;case"defaultRoom":n=Object(i.l)(Object(i.m)(b.a,"Channels/".concat(e.id,"/rooms")),Object(i.d)(1));break;default:throw new Error("not a valid info type")}return Object(i.b)(n)})));case 2:c=e.sent,r(t,c.map((function(e){return e.val()})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return E.apply(this,arguments)}function E(){return(E=Object(u.a)(Object(s.a)().mark((function e(t){var n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Object(i.b)(Object(i.m)(b.a,"Channels/".concat(t,"/name"))),Object(i.b)(Object(i.m)(b.a,"Channels/".concat(t,"/icon"))),Object(i.b)(Object(i.l)(Object(i.m)(b.a,"Channels/".concat(t,"/rooms")),Object(i.d)(1)))]);case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return e.val()})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){return U.apply(this,arguments)}function U(){return(U=Object(u.a)(Object(s.a)().mark((function e(t,n){var c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(i.m)(b.a,"Channels/".concat(t,"/room_categories")),e.next=3,Object(i.q)(c,Object(r.a)({},n,!0));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,n){return M.apply(this,arguments)}function M(){return(M=Object(u.a)(Object(s.a)().mark((function e(t,n,r){var c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(i.m)(b.a,"Channels/".concat(t,"/rooms/").concat(n)),e.next=3,Object(i.q)(c,{category:r});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,n){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(Object(s.a)().mark((function e(t,n,r){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.q)(Object(i.m)(b.a,"Channels/".concat(t,"/rooms/").concat(n)),{name:r});case 2:return e.next=4,Object(i.q)(Object(i.m)(b.a,"Rooms/".concat(n)),{name:r});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){return I.apply(this,arguments)}function I(){return(I=Object(u.a)(Object(s.a)().mark((function e(t,n){var c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=Object(i.m)(b.a,"Channels/".concat(t,"/user_roles")),Object(i.q)(c,Object(r.a)({},n,!0));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){var t=Object(o.d)(b.b,"uploadedFiles/".concat(e.name));return Object(o.f)(t,e)}function T(e,t){e.on("state_changed",(function(e){var n=Math.round(e.bytesTransferred/e.totalBytes*100);t(n)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(3),c=n(15),a=n(12),s=n(8);function u(e){var t=Object(s.useState)(e||{}),n=Object(a.a)(t,2),u=n[0],i=n[1];return{inputValues:u,setInputValues:i,handleChange:function(e){i((function(t){return Object(c.a)(Object(c.a)({},t),{},Object(r.a)({},e.target.name,e.target.value))}))},resetInputValues:function(){i({})}}}},,,,,,,function(e,t,n){"use strict";n(8),n(84);var r=n(6);t.a=function(e){var t=e.className,n=e.type,c=e.text,a=e.isUnderline,s=e.onClick;return Object(r.jsx)("button",{type:n||"button",className:t?"flat-btn ".concat(t):"flat-btn",onClick:s,children:Object(r.jsx)("span",{className:a?"underline-hover":null,children:c})})}},,function(e,t,n){"use strict";var r=n(0),c=n(2),a=n(12),s=n(8);t.a=function(e){var t=e.isMobile,n=e.mobile,u=e.desktop,i=e.children,o=Object(s.useState)(),b=Object(a.a)(o,2),l=b[0],j=b[1];return Object(s.useEffect)((function(){var e=t?n:u;e&&Object(c.a)(Object(r.a)().mark((function t(){var n;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:n=t.sent,j(n);case 4:case"end":return t.stop()}}),t)})))()}),[n,u,t]),i(l?l.default:function(){return null})}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(8),c=Object(r.createContext)(null)},,,,function(e,t,n){"use strict";n(8);var r=n(36),c=n.n(r),a=(n(87),n(6));t.a=function(e){var t=e.errorMsg;return c.a.createPortal(Object(a.jsx)("div",{id:"error-popup",children:Object(a.jsxs)("p",{className:"error-msg",children:[Object(a.jsx)("i",{className:"ri-close-fill"})," ",t]})}),document.querySelector("body"))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(12),c=n(8);function a(e){var t=Object(c.useState)(!1),n=Object(r.a)(t,2),a=n[0],s=n[1];return Object(c.useEffect)((function(){a&&setTimeout((function(){e.current&&s(!1)}),3500)})),{success:a,setSuccess:s}}},function(e,t,n){"use strict";n(8);var r=n(36),c=n.n(r),a=n(66),s=(n(85),n(6));t.a=function(e){var t=e.text;return c.a.createPortal(Object(s.jsxs)("div",{id:"success-popup",children:[Object(s.jsx)("div",{className:"svg-wrapper",children:Object(s.jsx)("img",{src:a.a,alt:"success"})}),Object(s.jsx)("div",{className:"success-msg",children:t})]}),document.querySelector("body"))}},function(e,t,n){"use strict";t.a=n.p+"static/media/Waffle_Coffee_Dessert.2e7ce93e.png"},function(e,t,n){"use strict";n(8),n(88);var r=n(6),c=function(e){var t=e.size;return Object(r.jsxs)("div",{className:t?"lds-ellipsis ".concat(t):"lds-ellipsis",children:[Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{})]})};n(89),t.a=function(){return Object(r.jsx)("div",{className:"loading-screen",children:Object(r.jsx)(c,{})})}},function(e,t,n){"use strict";var r=n(15),c=n(54),a=(n(8),n(6)),s=function(e){var t=Object.assign({},e);return Object(a.jsx)("input",Object(r.a)({},t))},u=["label","error"];t.a=function(e){var t=e.label,n=e.error,i=Object(c.a)(e,u);return Object(a.jsxs)("div",{className:n?"error input-wrapper":"input-wrapper",children:[t&&Object(a.jsxs)("label",{children:[Object(a.jsx)("span",{className:"caps-title",children:t}),n&&Object(a.jsxs)("span",{className:"error-msg",children:[" - ",n]})]}),Object(a.jsx)(s,Object(r.a)({},i))]})}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(12),c=n(8);function a(){var e=Object(c.useState)(window.innerWidth),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useRef)(window.innerWidth<=768);function u(){a(window.innerWidth),s.current=n<=768}return Object(c.useEffect)((function(){return window.addEventListener("resize",u),function(){return window.removeEventListener("resize",u)}})),{isMobileCheck:s}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return b}));var r=n(0),c=n(2),a=n(7),s=n(11);function u(e){var t=Object(a.m)(s.a,"Rooms/".concat(e));Object(a.f)(t)}function i(e,t,n,r){return o.apply(this,arguments)}function o(){return o=Object(c.a)(Object(r.a)().mark((function e(t,n,u,i){var o;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=Object(a.m)(s.a,"Rooms/".concat(t)),Object(a.h)(o,function(){var e=Object(c.a)(Object(r.a)().mark((function e(t){var c,a,s,o,b;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b=function(e){return e.map((function(e,t,n){return e.replyTo?(e.replyTo=n.find((function(t){return t.msgId===e.replyTo})),e):e}))},o=function(){for(var e in a)a[e].msgId=e,s.push(a[e])},c=t.val(),e.next=5,n(c.name);case 5:return a=c.messages||{},s=[],o(),e.next=10,u(b(s));case 10:i&&i();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function b(e,t){return l.apply(this,arguments)}function l(){return(l=Object(c.a)(Object(r.a)().mark((function e(t,n){var c,u;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(a.m)(s.a,"Rooms/".concat(t,"/messages")),u=Object(a.k)(c),Object(a.n)(u,n),e.abrupt("return",u.key);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,n){"use strict";t.a=n.p+"static/media/check-line.3f29db89.svg"},,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(8),c=n.n(r),a=n(36),s=n.n(a),u=n(37),i=n(12),o=n(16);var b=n(0),l=n(2),j=n(19),f=n(18);var p=n(53),O=n(30),d=n(64),h=n(51),m=n(42),v=n(94),x=n(31),w=n(65),y=n(6),k=function(e){var t=e.onRegister,n=e.onForgotPW,c=e.setUser,a=e.setLoading,s=Object(m.a)(),u=s.inputValues,i=s.handleChange,f=Object(r.useContext)(O.a).setError,p=Object(o.e)();function d(){return d=Object(l.a)(Object(b.a)().mark((function e(){var t,n;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=function(){var e=Object(l.a)(Object(b.a)().mark((function e(){var t;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.c)("-MqVZG54pnPMmqDjLVRc",{msg:"Hello there! undefined",user:"1",timestamp:Object(v.a)(new Date),mentions:[{uid:"".concat(n.uid),range:{offset:13,length:9,key:0}}]});case 2:return t=e.sent,e.next=5,Object(j.k)(n.uid,"-MqVZFTShVKjPVWc-jyE","-MqVZG54pnPMmqDjLVRc",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a(!0),e.next=5,Object(j.c)(c);case 5:return n=e.sent,e.next=8,Promise.all([Object(j.j)(n,"-MqVZFTJg485ZZ2TUtZ0"),Object(j.j)(n,"-MqVZFTPYJZ5kNMBKROY"),Object(j.j)(n,"-MqVZFTRVp_uIzlJVmOp"),Object(j.j)(n,"-MqVZFTShVKjPVWc-jyE"),t()]);case 8:a(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),f(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),d.apply(this,arguments)}return Object(y.jsxs)("div",{className:"login login-email",children:[Object(y.jsxs)("header",{children:[Object(y.jsx)("h3",{children:"Welcome to bread!"}),Object(y.jsx)("h4",{children:"a discord clone"})]}),Object(y.jsx)(x.a,{fields:[{label:"Email",type:"email",name:"email"},{label:"Password",type:"password",name:"password"}],noCancelBtn:!0,textBtns:[{text:"Forgot your password?",onClick:n},{text:"Need an account? Register",onClick:t},{text:"Generate account to test",onClick:function(){return d.apply(this,arguments)}}],handleChange:i,submitAction:function(){return Object(j.i)(u.email,u.password)},setError:f,cleanUp:function(){return p.push("/")},inputValues:u})]})},g=function(e){var t=e.channel,n=e.handleChange,r=e.onContinue,c=e.onReturningUser,a=e.close,s=e.inputValues;return Object(y.jsxs)("div",{className:"login new-user-username",children:[t?Object(y.jsxs)("header",{children:[Object(y.jsx)("h4",{children:"You are invited to join"}),Object(y.jsx)("h2",{children:t.name})]}):Object(y.jsx)("header",{children:Object(y.jsx)("h3",{children:"Create an account"})}),Object(y.jsx)(x.a,{fields:[{type:"text",name:"username",label:"username"}],actionBtnText:"Continue",textBtns:[{text:"Already have an account?",onClick:c}],handleChange:n,submitAction:r,cleanUp:function(){return"do nothing"},close:a,inputValues:s})]})},C=function(e){var t=e.newUserInfo,n=e.handleChange,c=e.channel,a=e.setUser,s=e.goBack,u=e.inputValues,i=Object(o.e)(),b=Object(r.useContext)(O.a).setError;return Object(y.jsxs)("div",{className:"login create-acc",children:[Object(y.jsx)("header",{children:Object(y.jsx)("h3",{children:"Just one more step..."})}),Object(y.jsx)(x.a,{fields:[{type:"email",label:"Email",name:"email"},{type:"password",label:"Password",name:"password"}],actionBtnText:"Create Account",cancelBtnText:"Go Back",close:s,handleChange:n,submitAction:function(){return Object(j.a)(t.email,t.password,t.username,c||null,a)},cleanUp:function(){c&&i.push("/channels/".concat(c))},setError:b,inputValues:u})]})},V=n(58),E=n(59),N=function(e){var t=e.close,n=Object(r.useState)(),c=Object(i.a)(n,2),a=c[0],s=c[1],u=Object(r.useContext)(O.a).setError,o=Object(r.useRef)(!1);Object(r.useEffect)((function(){return o.current=!0,function(){return o.current=!1}}));var b=Object(V.a)(),l=b.success,f=b.setSuccess;return Object(y.jsxs)(y.Fragment,{children:[l&&Object(y.jsx)(E.a,{text:"Password reset email sent"}),Object(y.jsxs)("div",{className:"login reset-password",children:[Object(y.jsx)("header",{children:Object(y.jsx)("h3",{children:"Reset your password"})}),Object(y.jsx)(x.a,{fields:[{type:"email",name:"email",label:"Email"}],actionBtnText:"Send email",submitAction:function(){return Object(j.h)(a)},setError:u,handleChange:function(e){return s(e.target.value)},cleanUp:function(){return f(!0)},close:t,inputValues:{email:a}})]})]})},U=n(60),S=(n(86),function(e){var t=e.setUser,n=e.isMobile,c=e.setLoading,a=Object(r.useState)("returning user"),s=Object(i.a)(a,2),u=s[0],b=s[1],l=Object(m.a)(),j=l.inputValues,f=l.handleChange,p=Object(o.g)().channelID;function O(){b("returning user")}return Object(y.jsxs)("div",{className:"login-screen",children:[Object(y.jsx)("div",{className:"login-formWrapper",children:{"returning user":Object(y.jsx)(k,{onRegister:function(){return b("new user")},onForgotPW:function(){return b("reset pw")},setUser:t,setLoading:c}),"new user":Object(y.jsx)(g,{channel:p,onContinue:function(){return b("create acc")},onReturningUser:function(){return b("returning user")},handleChange:f,close:O,inputValues:j}),"create acc":Object(y.jsx)(C,{newUserInfo:j,goBack:function(){return b("new user")},handleChange:f,channel:p,setUser:t,inputValues:j}),"reset pw":Object(y.jsx)(N,{close:O})}[u]}),!n&&Object(y.jsx)("div",{className:"login-artwork-wrapper",children:Object(y.jsx)("div",{className:"artwork",children:Object(y.jsx)("img",{src:U.a,alt:"illustration of bread and coffee"})})})]})}),M=n(57),R=n(61);n(90),n(91),n(92);var P=function(){var e=function(){var e=Object(r.useState)(),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){n&&setTimeout((function(){c()}),5e3)})),{error:n,setError:c}}(),t=e.error,c=e.setError,a=Object(r.useState)(!0),s=Object(i.a)(a,2),u=s[0],m=s[1],v=function(e,n){var c=Object(r.useState)(),a=Object(i.a)(c,2),s=a[0],u=a[1],p=Object(r.useState)(),O=Object(i.a)(p,2),d=O[0],h=O[1],m=Object(r.useState)(),v=Object(i.a)(m,2),x=v[0],w=v[1],y=Object(o.f)(),k=Object(o.e)(),g=Object(r.useRef)();return Object(r.useEffect)((function(){return g.current=!0,function(){return g.current=!1}})),Object(r.useEffect)((function(){var t=Object(f.d)();Object(f.e)(t,function(){var t=Object(l.a)(Object(b.a)().mark((function t(r){return Object(b.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g.current){t.next=2;break}return t.abrupt("return");case 2:if(r){t.next=8;break}return u(r),h(),e(!1),k.replace("/login"),t.abrupt("return");case 8:if(!r){t.next=18;break}return t.prev=9,t.next=12,Object(j.d)(r.uid,h,(function(e){r.color=e}),w);case 12:u(r),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(9),n(t.t0.message);case 18:case"end":return t.stop()}}),t,null,[[9,15]])})));return function(e){return t.apply(this,arguments)}}())}),[k,y.pathname,e,u,n]),Object(r.useEffect)((function(){if(s&&d){if("/"===y.pathname||"/login"===y.pathname)if(d[0]){var e=Object.keys(d[0].defaultRoom)[0];k.replace("channels/".concat(d[0].id,"/").concat(e))}else k.replace("explore");try{Object(j.m)(s.uid,d)}catch(t){n(t.message)}}}),[s,d,k,y.pathname,n]),{user:s,mentioned:x,setUser:u,channelList:d}}(m,c),x=v.user,w=v.mentioned,k=v.setUser,g=v.channelList,C=Object(d.a)().isMobileCheck.current,V=Object(r.useCallback)((function(){m(!1)}),[]);return Object(y.jsxs)(y.Fragment,{children:[t&&Object(y.jsx)(M.a,{errorMsg:t}),u&&Object(y.jsx)(R.a,{}),Object(y.jsxs)(O.a.Provider,{value:{setError:c},children:[Object(y.jsx)(o.a,{path:["/login/:channelID","/login"],children:!x&&Object(y.jsx)(S,{setUser:k,isMobile:C,setLoading:m})}),x&&Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(p.a.Provider,{value:{user:x,setUser:k,channelList:g,mentioned:w},children:Object(y.jsxs)("div",{className:"app",children:[Object(y.jsx)(o.a,{path:"/explore",children:Object(y.jsx)(h.a,{mobile:function(){return Promise.all([n.e(1),n.e(0),n.e(7)]).then(n.bind(null,372))},desktop:function(){return Promise.all([n.e(1),n.e(0),n.e(8)]).then(n.bind(null,373))},isMobile:C,children:function(e){return Object(y.jsx)(e,{finishLoading:V})}})}),Object(y.jsx)(o.a,{path:["/channels/:channelID/:roomID","/channels/:channelID"],children:Object(y.jsx)(h.a,{mobile:function(){return Promise.all([n.e(1),n.e(2),n.e(0),n.e(3),n.e(9)]).then(n.bind(null,374))},desktop:function(){return Promise.all([n.e(1),n.e(2),n.e(0),n.e(3),n.e(10)]).then(n.bind(null,375))},isMobile:C,children:function(e){return Object(y.jsx)(e,{finishLoading:V,setError:c})}})})]})})})]})]})};s.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(u.a,{children:Object(y.jsx)(P,{})})}),document.getElementById("root"))}],[[93,5,6]]]);
//# sourceMappingURL=main.0c84fe55.chunk.js.map