(this["webpackJsonpdiscord-clone"]=this["webpackJsonpdiscord-clone"]||[]).push([[4],[,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n(71),c=n(7),a=n(26);Object(r.a)({apiKey:"AIzaSyC8GZMfCxqOUIFsa2OYlXcMzfQKfAobukQ",authDomain:"bread-8adf4.firebaseapp.com",databaseURL:"https://bread-8adf4-default-rtdb.firebaseio.com",projectId:"bread-8adf4",storageBucket:"bread-8adf4.appspot.com",messagingSenderId:"163895954776",appId:"1:163895954776:web:81bdb5187f320d28a4692d"});var s=Object(c.c)(),u=Object(a.c)()},,,,,,,function(e,t,n){"use strict";n.d(t,"n",(function(){return h})),n.d(t,"h",(function(){return d})),n.d(t,"l",(function(){return v})),n.d(t,"d",(function(){return S})),n.d(t,"a",(function(){return C})),n.d(t,"i",(function(){return E})),n.d(t,"e",(function(){return T})),n.d(t,"b",(function(){return P})),n.d(t,"j",(function(){return U})),n.d(t,"m",(function(){return _})),n.d(t,"k",(function(){return q})),n.d(t,"o",(function(){return F})),n.d(t,"g",(function(){return k})),n.d(t,"f",(function(){return D})),n.d(t,"c",(function(){return p}));var r=n(3),c=n(0),a=n.n(c),s=n(2),u=n(7),i=n(17),o=n(26),l=n(42),b=n(11),f=n(41);function p(e){return j.apply(this,arguments)}function j(){return(j=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(f.d)({dictionaries:[f.a,f.c,f.b]}),e.next=3,C("".concat(n,"@email.com"),n,n,null,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){var t=Object(i.d)();Object(i.h)(t,e)}function O(e){var t=Object(u.m)(b.a,"users/".concat(e,"/channels"));Object(u.f)(t)}function h(e,t){return m.apply(this,arguments)}function m(){return(m=Object(s.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(o.d)(b.b,"user_avatars/".concat(t)),e.next=3,Object(o.e)(r,n);case 3:return e.next=5,Object(o.b)(r);case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t,n,r){return x.apply(this,arguments)}function x(){return(x=Object(s.a)(a.a.mark((function e(t,n,c,s){var u,o,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=Object(i.d)(),o=u.currentUser,e.t0=t,e.next="displayName"===e.t0?5:"avatar"===e.t0?8:"color"===e.t0?11:"email"===e.t0?14:"password"===e.t0?17:20;break;case 5:return e.next=7,Object(i.m)(o,{displayName:n});case 7:return e.abrupt("break",21);case 8:return e.next=10,Object(i.m)(o,{photoURL:n});case 10:return e.abrupt("break",21);case 11:return e.next=13,w(o.uid,n);case 13:return e.abrupt("break",21);case 14:return e.next=16,Object(i.k)(o,n);case 16:return e.abrupt("break",21);case 17:return e.next=19,Object(i.l)(o,n);case 19:return e.abrupt("break",21);case 20:return e.abrupt("return");case 21:return s&&s.length>0&&(l=Object(r.a)({},t,n),y(o.uid,s,l)),e.next=24,Object(i.g)(o);case 24:c(o);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){var n=["rgb(92, 100, 244)","rgb(237, 66, 69)","rgb(250, 166, 26)"];t=t||n[Math.floor(Math.random()*n.length)];var r=Object(u.m)(b.a,"users/".concat(e));return Object(u.q)(r,{color:t}),t}function y(e,t,n){t.forEach(function(){var t=Object(s.a)(a.a.mark((function t(r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.q)(Object(u.m)(b.a,"Channels/".concat(r.id,"/users/").concat(e)),n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}function k(e,t){return g.apply(this,arguments)}function g(){return(g=Object(s.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(i.d)(),c=r.currentUser,e.prev=2,e.next=5,Object(i.c)(c);case 5:Object(u.n)(Object(u.m)(b.a,"users/".concat(c.uid)),null),y(c.uid,t,null),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n&&n(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function C(e,t,n,r,c){return V.apply(this,arguments)}function V(){return(V=Object(s.a)(a.a.mark((function e(t,n,r,c,s){var u,o,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=Object(i.d)(),e.next=3,Object(i.b)(u,t,n);case 3:return o=e.sent,e.next=6,Object(i.m)(o.user,{displayName:r});case 6:return e.next=8,w(o.user.uid);case 8:return l=e.sent,o.user.color=l,c&&U(o.user,c),s&&s(o.user),e.abrupt("return",o.user);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return N.apply(this,arguments)}function N(){return(N=Object(s.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(i.d)(),e.next=3,Object(i.i)(r,t,n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t,n){return R.apply(this,arguments)}function R(){return(R=Object(s.a)(a.a.mark((function e(t,n,r){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c={})["users/".concat(t.uid,"/channels/").concat(n)]="",c["Channels/".concat(n,"/users/").concat(t.uid)]={role:r||null,displayName:t.displayName,avatar:t.photoURL||"",color:t.color},e.next=5,Object(u.q)(Object(u.m)(b.a),c);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,n,r){return M.apply(this,arguments)}function M(){return M=Object(s.a)(a.a.mark((function e(t,n,r,c){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:i=Object(u.m)(b.a,"users/".concat(t,"/")),Object(u.h)(i,function(){var e=Object(s.a)(a.a.mark((function e(t){var u,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=function(){return(o=Object(s.a)(a.a.mark((function e(){var t,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in c=function(e,n){n.forEach((function(n,r){return t[r][e]=n}))},t=[],u.channels)t.push({id:r,role:u.channels[r]});return e.next=5,Promise.all([Object(l.i)("icon",t,c),Object(l.i)("name",t,c),Object(l.i)("defaultRoom",t,c)]);case 5:n(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)},i=function(){return o.apply(this,arguments)},u=t.val()){e.next=5;break}return e.abrupt("return");case 5:r(u.color),i(),c(u.mentions);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function _(e,t){var n=Object(u.m)(b.a,".info/connected");t.forEach((function(t){var r=Object(u.m)(b.a,"Channels/".concat(t.id,"/users/").concat(e));Object(u.h)(n,function(){var t=Object(s.a)(a.a.mark((function t(c){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return!1===c.val()&&(Object(u.f)(n),O(e)),t.next=3,Object(u.g)(r).update({status:"offline"});case 3:Object(u.q)(r,{status:"online"});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}function q(e,t,n,r){return I.apply(this,arguments)}function I(){return(I=Object(s.a)(a.a.mark((function e(t,n,r,c){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(u.m)(b.a,"users/".concat(t,"/mentions/").concat(n,"/").concat(r,"/").concat(c)),e.next=3,Object(u.n)(s,!0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t,n){return B.apply(this,arguments)}function B(){return(B=Object(s.a)(a.a.mark((function e(t,n,r){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(u.m)(b.a,"users/".concat(t,"/mentions/").concat(n,"/").concat(r)),e.next=3,Object(u.n)(c,null);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){var t=Object(u.m)(b.a,"users/".concat(e,"/isOnline"));return Object(u.b)(t)}function F(e){return L.apply(this,arguments)}function L(){return(L=Object(s.a)(a.a.mark((function e(t){var n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(i.d)(),r=n.currentUser){e.next=4;break}return e.abrupt("return",{isValid:!0});case 4:return e.prev=4,c=i.a.credential(r.email,t),e.next=8,Object(i.f)(r,c);case 8:if(!e.sent){e.next=11;break}return e.abrupt("return",{isValid:!0});case 11:return e.abrupt("return",{error:"something went wrong"});case 14:return e.prev=14,e.t0=e.catch(4),e.abrupt("return",{error:e.t0.message});case 17:case"end":return e.stop()}}),e,null,[[4,14]])})))).apply(this,arguments)}function D(){return Z.apply(this,arguments)}function Z(){return(Z=Object(s.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(i.d)(),Object(i.j)(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(8),c=Object(r.createContext)(null)},function(e,t,n){"use strict";var r=n(0),c=n.n(r),a=n(2),s=n(12),u=n(8),i=n(14),o=n(3),l=n(15),b=n(18);function f(e){return/\S+@\S+\.\S+/.test(e)?{isValid:!0}:{error:"Not a valid email"}}function p(e){return e.length<6?{isValid:!1,error:"Must be 6 or more in length"}:{isValid:!0}}function j(e,t){return e===t?{isValid:!0}:{error:"Passwords don't match"}}function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;switch(!0){case e.name.includes("username"):return e.value.length>0?{isValid:!0}:{error:"username is empty"};case e.name.includes("room_name"):return e.value.length>0?{isValid:!0}:{error:"room name is empty"};case e.name.includes("email"):return f(e.value);case e.name.includes("password"):var r=p(e.value);return r.error?r:"confirm_password"===e.name?j(e.value,n):"current_password"!==e.name&&"password"!==e.name||!t?{isValid:!0}:Object(b.o)(e.value);default:return{isValid:!0}}}var O=function(e){var t=Object(u.useState)((function(){return e.reduce((function(e,t){return e[t]="",e}),{})})),n=Object(s.a)(t,2),r=n[0],b=n[1];function f(e){return p.apply(this,arguments)}function p(){return p=Object(a.a)(c.a.mark((function e(t){var n,r,a,s,u=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]&&u[1],!(r=u.length>2&&void 0!==u[2]?u[2]:void 0)){e.next=8;break}return e.next=5,d(t,n,r);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,d(t,n);case 10:e.t0=e.sent;case 11:return a=e.t0,s=a.error?a.error:"",b((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(o.a)({},t.name,s))})),e.abrupt("return",!a.error);case 15:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function j(){return(j=Object(a.a)(c.a.mark((function t(n,r,a,s){var u,o,l,b,p,j;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),u=n.target.elements,t.prev=2,o=!1,l=Object(i.a)(e),t.prev=5,l.s();case 7:if((b=l.n()).done){t.next=23;break}if(p=b.value,j=u.namedItem(p),"confirm_password"!==p){t.next=16;break}return t.next=13,f(j,!0,u.namedItem("new_password").value);case 13:t.t0=t.sent,t.next=19;break;case 16:return t.next=18,f(j,!0);case 18:t.t0=t.sent;case 19:t.t0||(o=!0);case 21:t.next=7;break;case 23:t.next=28;break;case 25:t.prev=25,t.t1=t.catch(5),l.e(t.t1);case 28:return t.prev=28,l.f(),t.finish(28);case 31:if(!o){t.next=33;break}return t.abrupt("return");case 33:return t.next=35,r();case 35:a(),t.next=41;break;case 38:t.prev=38,t.t2=t.catch(2),s&&s(t.t2.message);case 41:case"end":return t.stop()}}),t,null,[[2,38],[5,25,28,31]])})))).apply(this,arguments)}return{inputError:r,validateInput:f,submitForm:function(e,t,n,r){return j.apply(this,arguments)}}},h=n(67),m=n.n(h),v=n(64),x=n(50),w=n(6);t.a=function(e){var t=e.fields,n=e.inputValues,r=e.actionBtnText,i=e.noCancelBtn,o=e.cancelBtnText,l=e.textBtns,b=e.handleChange,f=e.submitAction,p=e.cleanUp,j=e.close,d=e.setError,h=Object(u.useRef)(),y=t.map((function(e){return e.name})),k=O(y),g=k.inputError,C=k.validateInput,V=k.submitForm,E=Object(u.useState)(!1),N=Object(s.a)(E,2),U=N[0],R=N[1],S=Object(u.useRef)(!1);return Object(u.useEffect)((function(){return S.current=!0,function(){return S.current=!1}}),[]),Object(w.jsxs)("form",{ref:h,autoComplete:"nope",onSubmit:function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),p=p||j,e.next=4,V(t,f,p,d);case 4:S.current&&R(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(w.jsxs)("div",{className:"content",children:[Object(w.jsx)("input",{type:"password",hidden:!0}),t.map((function(e,t){return Object(w.jsx)(v.a,{type:e.type,autoFocus:0===t,onBlur:"confirm_password"===e.name?function(e){return C(e.target,!1,h.current.elements.namedItem("new_password").value)}:function(e){return C(e.target)},error:g[e.name],label:e.label,name:e.name,onChange:b,value:n[e.name]||""},t)}))]}),Object(w.jsxs)("footer",{children:[Object(w.jsxs)("div",{className:U?"btn-ctn no-pointer-events":"btn-ctn",children:[!i&&Object(w.jsx)(x.a,{text:o||"Cancel",isUnderline:!0,onClick:j}),Object(w.jsx)(x.a,{type:"submit",text:r||"Done",className:"filled small",loading:U})]}),l&&Object(w.jsx)("div",{className:"text-btn-ctn",children:l.map((function(e){return Object(w.jsx)("span",{className:"link",onClick:e.onClick,children:e.text},m()())}))})]})]})}},,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"j",(function(){return E})),n.d(t,"k",(function(){return O})),n.d(t,"b",(function(){return f})),n.d(t,"h",(function(){return w})),n.d(t,"i",(function(){return C})),n.d(t,"d",(function(){return U})),n.d(t,"n",(function(){return S})),n.d(t,"c",(function(){return k})),n.d(t,"e",(function(){return B})),n.d(t,"g",(function(){return x})),n.d(t,"m",(function(){return j})),n.d(t,"a",(function(){return F})),n.d(t,"l",(function(){return L})),n.d(t,"f",(function(){return I})),n.d(t,"o",(function(){return _}));var r=n(3),c=n(20),a=n(15),s=n(0),u=n.n(s),i=n(2),o=n(7),l=n(26),b=n(11);n(18);function f(e,t,n){return p.apply(this,arguments)}function p(){return(p=Object(i.a)(u.a.mark((function e(t,n,r){var c,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(o.m)(b.a,"Channels"),a=Object(o.k)(c),e.next=4,Object(o.n)(a,{name:t});case 4:if(!r){e.next=10;break}return e.next=7,m(a.key,r);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0="";case 11:if(s=e.t0,!n){e.next=15;break}return e.next=15,Object(o.n)(Object(o.m)(b.a,"public_channels/".concat(a.key)),{name:t,icon:s,description:"This is a new channel and there is no description for it at the moment."});case 15:return e.next=17,k(a.key,"general",null);case 17:return e.abrupt("return",a.key);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return d.apply(this,arguments)}function d(){return(d=Object(i.a)(u.a.mark((function e(t){var n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.b)(Object(o.l)(Object(o.m)(b.a,"/public_channels/"),Object(o.i)("name"),Object(o.p)(t)));case 2:return n=e.sent,r=n.val(),c=Object.keys(r).map((function(e){return Object(a.a)(Object(a.a)({},r[e]),{},{id:e})})),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(u.a.mark((function e(t,n){var r,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="init"===e.t0?3:"next"===e.t0?7:"prev"===e.t0?11:15;break;case 3:return e.next=5,Object(o.b)(Object(o.l)(Object(o.m)(b.a,"public_channels/"),Object(o.d)(20)));case 5:case 9:case 13:return r=e.sent,e.abrupt("break",16);case 7:return e.next=9,Object(o.b)(Object(o.l)(Object(o.m)(b.a,"public_channels/"),Object(o.j)(),Object(o.o)(n),Object(o.d)(20)));case 11:return e.next=13,Object(o.b)(Object(o.l)(Object(o.m)(b.a,"public_channels/"),Object(o.j)(),Object(o.a)(n),Object(o.e)(20)));case 15:return e.abrupt("return");case 16:if(c=r.val()){e.next=19;break}return e.abrupt("return");case 19:return s=Object.keys(c).map((function(e){return Object(a.a)(Object(a.a)({},c[e]),{},{id:e})})),e.abrupt("return",s);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t){return v.apply(this,arguments)}function v(){return(v=Object(i.a)(u.a.mark((function e(t,n){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(l.d)(b.b,"channel_icons/".concat(t)),e.next=3,Object(l.e)(r,n);case 3:return e.next=5,Object(l.b)(r);case 5:return c=e.sent,e.next=8,Object(o.q)(Object(o.m)(b.a,"Channels/".concat(t)),{icon:c});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){var n=Object(o.m)(b.a,"Channels/".concat(e));Object(o.f)(n)}function w(e,t,n,r,c,a,s,u){return y.apply(this,arguments)}function y(){return(y=Object(i.a)(u.a.mark((function e(t,n,r,s,i,l,f,p){var j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{j=Object(o.m)(b.a,"Channels/".concat(t)),Object(o.h)(j,(function(e){var t=e.val();n(t.name,t.icon||"");var u=t.room_categories?Object.keys(t.room_categories):[];r(["none"].concat(Object(c.a)(u)));var o=[];!function(e){for(var t in e)o.push(Object(a.a)(Object(a.a)({},e[t]),{},{id:t}))}(t.rooms),s(o);var b=t.user_roles?Object.keys(t.user_roles):[];i([].concat(Object(c.a)(b),["Online"]));var p=[];!function(e){for(var t in e){var n=Object(a.a)(Object(a.a)({},e[t]),{},{uid:t});p.push(n)}}(t.users),l(p);var j=p.filter((function(e){return"online"===e.status}));f(j)}))}catch(u){p&&p(u.message)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,n){return g.apply(this,arguments)}function g(){return(g=Object(i.a)(u.a.mark((function e(t,n,r){var c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(o.m)(b.a,"Channels/".concat(t,"/rooms")),a=Object(o.k)(c),e.next=4,Object(o.n)(a,{name:n,category:r});case 4:return e.next=6,Object(o.n)(Object(o.m)(b.a,"Rooms/".concat(a.key)),{name:n});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t,n){return V.apply(this,arguments)}function V(){return(V=Object(i.a)(u.a.mark((function e(t,n,r){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map((function(e){var n;switch(t){case"name":n=Object(o.m)(b.a,"Channels/".concat(e.id,"/name"));break;case"icon":n=Object(o.m)(b.a,"Channels/".concat(e.id,"/icon"));break;case"defaultRoom":n=Object(o.l)(Object(o.m)(b.a,"Channels/".concat(e.id,"/rooms")),Object(o.d)(1));break;default:throw new Error("not a valid info type")}return Object(o.b)(n)})));case 2:c=e.sent,r(t,c.map((function(e){return e.val()})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return N.apply(this,arguments)}function N(){return(N=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Object(o.b)(Object(o.m)(b.a,"Channels/".concat(t,"/name"))),Object(o.b)(Object(o.m)(b.a,"Channels/".concat(t,"/icon"))),Object(o.b)(Object(o.l)(Object(o.m)(b.a,"Channels/".concat(t,"/rooms")),Object(o.d)(1)))]);case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return e.val()})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t){return R.apply(this,arguments)}function R(){return(R=Object(i.a)(u.a.mark((function e(t,n){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(o.m)(b.a,"Channels/".concat(t,"/room_categories")),e.next=3,Object(o.q)(c,Object(r.a)({},n,!0));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,n){return M.apply(this,arguments)}function M(){return(M=Object(i.a)(u.a.mark((function e(t,n,r){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(o.m)(b.a,"Channels/".concat(t,"/rooms/").concat(n)),e.next=3,Object(o.q)(c,{category:r});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t,n){return q.apply(this,arguments)}function q(){return(q=Object(i.a)(u.a.mark((function e(t,n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.q)(Object(o.m)(b.a,"Channels/".concat(t,"/rooms/").concat(n)),{name:r});case 2:return e.next=4,Object(o.q)(Object(o.m)(b.a,"Rooms/".concat(n)),{name:r});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return P.apply(this,arguments)}function P(){return(P=Object(i.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={})["Channels/".concat(t,"/rooms/").concat(n)]=null,r["Rooms/".concat(n)]=null,e.next=5,Object(o.q)(Object(o.m)(b.a),r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t){return T.apply(this,arguments)}function T(){return(T=Object(i.a)(u.a.mark((function e(t,n){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=Object(o.m)(b.a,"Channels/".concat(t,"/user_roles")),Object(o.q)(c,Object(r.a)({},n,!0));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){var t=Object(l.d)(b.b,"uploadedFiles/".concat(e.name));return Object(l.f)(t,e)}function L(e,t){e.on("state_changed",(function(e){var n=Math.round(e.bytesTransferred/e.totalBytes*100);t(n)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(3),c=n(15),a=n(12),s=n(8);function u(){var e=Object(s.useState)({}),t=Object(a.a)(e,2),n=t[0],u=t[1];return{inputValues:n,setInputValues:u,handleChange:function(e){u((function(t){return Object(c.a)(Object(c.a)({},t),{},Object(r.a)({},e.target.name,e.target.value))}))},resetInputValues:function(){u({})}}}},,,,,function(e,t,n){"use strict";n(8),n(87);var r=n(6);t.a=function(e){var t=e.size;return Object(r.jsxs)("div",{className:t?"lds-ellipsis ".concat(t):"lds-ellipsis",children:[Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{})]})}},,function(e,t,n){"use strict";n(8);var r=n(48),c=(n(88),n(6));t.a=function(e){var t=e.className,n=e.type,a=e.text,s=e.isUnderline,u=e.loading,i=e.onClick;return Object(c.jsx)("button",{type:n||"button",className:t?"flat-btn ".concat(t):"flat-btn",onClick:i,children:u?Object(c.jsx)(r.a,{size:"small"}):Object(c.jsx)("span",{className:s?"underline-hover":null,children:a})})}},,function(e,t,n){"use strict";var r=n(0),c=n.n(r),a=n(2),s=n(12),u=n(8);t.a=function(e){var t=e.isMobile,n=e.mobile,r=e.desktop,i=e.children,o=Object(u.useState)(),l=Object(s.a)(o,2),b=l[0],f=l[1];return Object(u.useEffect)((function(){var e=t?n:r;e&&Object(a.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:n=t.sent,f(n);case 4:case"end":return t.stop()}}),t)})))()}),[n,r,t]),i(b?b.default:function(){return null})}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(8),c=Object(r.createContext)(null)},,,,function(e,t,n){"use strict";n(8);var r=n(36),c=n.n(r),a=(n(91),n(6));t.a=function(e){var t=e.errorMsg;return c.a.createPortal(Object(a.jsx)("div",{id:"error-popup",children:Object(a.jsxs)("p",{className:"error-msg",children:[Object(a.jsx)("i",{className:"ri-close-fill"})," ",t]})}),document.querySelector("body"))}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(12),c=n(8);function a(e){var t=Object(c.useState)(!1),n=Object(r.a)(t,2),a=n[0],s=n[1];return Object(c.useEffect)((function(){a&&setTimeout((function(){e.current&&s(!1)}),3500)})),{success:a,setSuccess:s}}},function(e,t,n){"use strict";n(8);var r=n(36),c=n.n(r),a=n(69),s=(n(89),n(6));t.a=function(e){var t=e.text;return c.a.createPortal(Object(s.jsxs)("div",{id:"success-popup",children:[Object(s.jsx)("div",{className:"svg-wrapper",children:Object(s.jsx)("img",{src:a.a,alt:"success"})}),Object(s.jsx)("div",{className:"success-msg",children:t})]}),document.querySelector("body"))}},function(e,t,n){"use strict";t.a=n.p+"static/media/Waffle_Coffee_Dessert.2e7ce93e.png"},function(e,t,n){"use strict";n(8);var r=n(48),c=(n(92),n(6));t.a=function(){return Object(c.jsx)("div",{className:"loading-screen",children:Object(c.jsx)(r.a,{})})}},function(e,t,n){"use strict";var r=n(15),c=n(56),a=(n(8),n(6)),s=function(e){var t=Object.assign({},e);return Object(a.jsx)("input",Object(r.a)({},t))},u=["label","error"];t.a=function(e){var t=e.label,n=e.error,i=Object(c.a)(e,u);return Object(a.jsxs)("div",{className:n?"error input-wrapper":"input-wrapper",children:[t&&Object(a.jsxs)("label",{children:[Object(a.jsx)("span",{className:"caps-title",children:t}),n&&Object(a.jsxs)("span",{className:"error-msg",children:[" - ",n]})]}),Object(a.jsx)(s,Object(r.a)({},i))]})}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(12),c=n(8);function a(){var e=Object(c.useState)(window.innerWidth),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useRef)(window.innerWidth<=768);function u(){a(window.innerWidth),s.current=n<=768}return Object(c.useEffect)((function(){return window.addEventListener("resize",u),function(){return window.removeEventListener("resize",u)}})),{isMobileCheck:s}}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return b}));var r=n(0),c=n.n(r),a=n(2),s=n(7),u=n(11);function i(e){var t=Object(s.m)(u.a,"Rooms/".concat(e));Object(s.f)(t)}function o(e,t,n,r){return l.apply(this,arguments)}function l(){return l=Object(a.a)(c.a.mark((function e(t,n,r,i){var o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=Object(s.m)(u.a,"Rooms/".concat(t)),Object(s.h)(o,function(){var e=Object(a.a)(c.a.mark((function e(t){var a,s,u,o,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(e){return e.map((function(e,t,n){return e.replyTo?(e.replyTo=n.find((function(t){return t.msgId===e.replyTo})),e):e}))},o=function(){for(var e in s)s[e].msgId=e,u.push(s[e])},a=t.val(),e.next=5,n(a.name);case 5:return s=a.messages||{},u=[],o(),e.next=10,r(l(u));case 10:i&&i();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function b(e,t){return f.apply(this,arguments)}function f(){return(f=Object(a.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(s.m)(u.a,"Rooms/".concat(t,"/messages")),a=Object(s.k)(r),Object(s.n)(a,n),e.abrupt("return",a.key);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,n){"use strict";t.a=n.p+"static/media/check-line.3f29db89.svg"},,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(8),c=n.n(r),a=n(36),s=n.n(a),u=n(38),i=n(12),o=n(16);var l=n(0),b=n.n(l),f=n(2),p=n(18),j=n(17);var d=n(54),O=n(30),h=n(66),m=n(52),v=n(43),x=n(97),w=n(31),y=n(68),k=n(6),g=function(e){var t=e.onRegister,n=e.onForgotPW,c=e.setUser,a=e.setLoading,s=Object(v.a)(),u=s.inputValues,i=s.handleChange,l=Object(r.useContext)(O.a).setError,j=Object(o.e)();function d(){return d=Object(f.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=function(){var e=Object(f.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.c)("-MqVZG54pnPMmqDjLVRc",{msg:"Hello there! undefined",user:"1",timestamp:Object(x.a)(new Date),mentions:[{uid:"".concat(n.uid),range:{offset:13,length:9,key:0}}]});case 2:return t=e.sent,e.next=5,Object(p.k)(n.uid,"-MqVZFTShVKjPVWc-jyE","-MqVZG54pnPMmqDjLVRc",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a(!0),e.next=5,Object(p.c)(c);case 5:return n=e.sent,e.next=8,Promise.all([Object(p.j)(n,"-MqVZFTJg485ZZ2TUtZ0"),Object(p.j)(n,"-MqVZFTPYJZ5kNMBKROY"),Object(p.j)(n,"-MqVZFTRVp_uIzlJVmOp"),Object(p.j)(n,"-MqVZFTShVKjPVWc-jyE"),t()]);case 8:a(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),l(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),d.apply(this,arguments)}return Object(k.jsxs)("div",{className:"login login-email",children:[Object(k.jsxs)("header",{children:[Object(k.jsx)("h3",{children:"Welcome to bread!"}),Object(k.jsx)("h4",{children:"a discord clone"})]}),Object(k.jsx)(w.a,{fields:[{label:"Email",type:"email",name:"email"},{label:"Password",type:"password",name:"password"}],noCancelBtn:!0,textBtns:[{text:"Forgot your password?",onClick:n},{text:"Need an account? Register",onClick:t},{text:"Generate account to test",onClick:function(){return d.apply(this,arguments)}}],handleChange:i,submitAction:function(){return Object(p.i)(u.email,u.password)},setError:l,cleanUp:function(){return j.push("/")},inputValues:u})]})},C=function(e){var t=e.channel,n=e.handleChange,r=e.onContinue,c=e.onReturningUser,a=e.close,s=e.inputValues;return Object(k.jsxs)("div",{className:"login new-user-username",children:[t?Object(k.jsxs)("header",{children:[Object(k.jsx)("h4",{children:"You are invited to join"}),Object(k.jsx)("h2",{children:t.name})]}):Object(k.jsx)("header",{children:Object(k.jsx)("h3",{children:"Create an account"})}),Object(k.jsx)(w.a,{fields:[{type:"text",name:"username",label:"username"}],actionBtnText:"Continue",textBtns:[{text:"Already have an account?",onClick:c}],handleChange:n,submitAction:r,cleanUp:function(){return"do nothing"},close:a,inputValues:s})]})},V=function(e){var t=e.newUserInfo,n=e.handleChange,c=e.channel,a=e.setUser,s=e.goBack,u=e.inputValues,i=Object(o.e)(),l=Object(r.useContext)(O.a).setError;return Object(k.jsxs)("div",{className:"login create-acc",children:[Object(k.jsx)("header",{children:Object(k.jsx)("h3",{children:"Just one more step..."})}),Object(k.jsx)(w.a,{fields:[{type:"email",label:"Email",name:"email"},{type:"password",label:"Password",name:"password"}],actionBtnText:"Create Account",cancelBtnText:"Go Back",close:s,handleChange:n,submitAction:function(){return Object(p.a)(t.email,t.password,t.username,c||null,a)},cleanUp:function(){c&&i.push("/channels/".concat(c))},setError:l,inputValues:u})]})},E=n(60),N=n(61),U=function(e){var t=e.close,n=Object(r.useState)(),c=Object(i.a)(n,2),a=c[0],s=c[1],u=Object(r.useContext)(O.a).setError,o=Object(r.useRef)(!1);Object(r.useEffect)((function(){return o.current=!0,function(){return o.current=!1}}));var l=Object(E.a)(),b=l.success,f=l.setSuccess;return Object(k.jsxs)(k.Fragment,{children:[b&&Object(k.jsx)(N.a,{text:"Password reset email sent"}),Object(k.jsxs)("div",{className:"login reset-password",children:[Object(k.jsx)("header",{children:Object(k.jsx)("h3",{children:"Reset your password"})}),Object(k.jsx)(w.a,{fields:[{type:"email",name:"email",label:"Email"}],actionBtnText:"Send email",submitAction:function(){return Object(p.h)(a)},setError:u,handleChange:function(e){return s(e.target.value)},cleanUp:function(){return f(!0)},close:t,inputValues:{email:a}})]})]})},R=n(62),S=(n(90),function(e){var t=e.setUser,n=e.isMobile,c=e.setLoading,a=Object(r.useState)("returning user"),s=Object(i.a)(a,2),u=s[0],l=s[1],b=Object(v.a)(),f=b.inputValues,p=b.handleChange,j=Object(o.g)().channelID;function d(){l("returning user")}return Object(k.jsxs)("div",{className:"login-screen",children:[Object(k.jsx)("div",{className:"login-formWrapper",children:{"returning user":Object(k.jsx)(g,{onRegister:function(){return l("new user")},onForgotPW:function(){return l("reset pw")},setUser:t,setLoading:c}),"new user":Object(k.jsx)(C,{channel:j,onContinue:function(){return l("create acc")},onReturningUser:function(){return l("returning user")},handleChange:p,close:d,inputValues:f}),"create acc":Object(k.jsx)(V,{newUserInfo:f,goBack:function(){return l("new user")},handleChange:p,channel:j,setUser:t,inputValues:f}),"reset pw":Object(k.jsx)(U,{close:d})}[u]}),!n&&Object(k.jsx)("div",{className:"login-artwork-wrapper",children:Object(k.jsx)("div",{className:"artwork",children:Object(k.jsx)("img",{src:R.a,alt:"illustration of bread and coffee"})})})]})}),M=n(58),_=n(63);n(93),n(94),n(95);var q=function(){var e=function(){var e=Object(r.useState)(),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){n&&setTimeout((function(){c()}),5e3)})),{error:n,setError:c}}(),t=e.error,c=e.setError,a=Object(r.useState)(!0),s=Object(i.a)(a,2),u=s[0],l=s[1],v=function(e,n){var c=Object(r.useState)(),a=Object(i.a)(c,2),s=a[0],u=a[1],l=Object(r.useState)(),d=Object(i.a)(l,2),O=d[0],h=d[1],m=Object(r.useState)(),v=Object(i.a)(m,2),x=v[0],w=v[1],y=Object(o.f)(),k=Object(o.e)(),g=Object(r.useRef)();return Object(r.useEffect)((function(){return g.current=!0,function(){return g.current=!1}})),Object(r.useEffect)((function(){var t=Object(j.d)();Object(j.e)(t,function(){var t=Object(f.a)(b.a.mark((function t(r){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g.current){t.next=2;break}return t.abrupt("return");case 2:if(r){t.next=8;break}return u(r),h(),e(!1),k.replace("/login"),t.abrupt("return");case 8:if(!r){t.next=18;break}return t.prev=9,t.next=12,Object(p.d)(r.uid,h,(function(e){r.color=e}),w);case 12:u(r),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(9),n(t.t0.message);case 18:case"end":return t.stop()}}),t,null,[[9,15]])})));return function(e){return t.apply(this,arguments)}}())}),[k,y.pathname,e,u,n]),Object(r.useEffect)((function(){if(s&&O){if("/"===y.pathname||"/login"===y.pathname)if(O[0]){var e=Object.keys(O[0].defaultRoom)[0];k.replace("channels/".concat(O[0].id,"/").concat(e))}else k.replace("explore");try{Object(p.m)(s.uid,O)}catch(t){n(t.message)}}}),[s,O,k,y.pathname,n]),{user:s,mentioned:x,setUser:u,channelList:O}}(l,c),x=v.user,w=v.mentioned,y=v.setUser,g=v.channelList,C=Object(h.a)().isMobileCheck.current,V=Object(r.useCallback)((function(){l(!1)}),[]);return Object(k.jsxs)(k.Fragment,{children:[t&&Object(k.jsx)(M.a,{errorMsg:t}),u&&Object(k.jsx)(_.a,{}),Object(k.jsxs)(O.a.Provider,{value:{setError:c},children:[Object(k.jsx)(o.a,{path:["/login/:channelID","/login"],children:!x&&Object(k.jsx)(S,{setUser:y,isMobile:C,setLoading:l})}),x&&Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(d.a.Provider,{value:{user:x,setUser:y,channelList:g,mentioned:w},children:Object(k.jsxs)("div",{className:"app",children:[Object(k.jsx)(o.a,{path:"/explore",children:Object(k.jsx)(m.a,{mobile:function(){return Promise.all([n.e(1),n.e(0),n.e(7)]).then(n.bind(null,376))},desktop:function(){return Promise.all([n.e(1),n.e(0),n.e(8)]).then(n.bind(null,377))},isMobile:C,children:function(e){return Object(k.jsx)(e,{finishLoading:V})}})}),Object(k.jsx)(o.a,{path:["/channels/:channelID/:roomID","/channels/:channelID"],children:Object(k.jsx)(m.a,{mobile:function(){return Promise.all([n.e(1),n.e(2),n.e(0),n.e(3),n.e(9)]).then(n.bind(null,378))},desktop:function(){return Promise.all([n.e(1),n.e(2),n.e(0),n.e(3),n.e(10)]).then(n.bind(null,379))},isMobile:C,children:function(e){return Object(k.jsx)(e,{finishLoading:V,setError:c})}})})]})})})]})]})};s.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(u.a,{basename:"/discord-clone",children:Object(k.jsx)(q,{})})}),document.getElementById("root"))}],[[96,5,6]]]);
//# sourceMappingURL=main.0a2d42fa.chunk.js.map