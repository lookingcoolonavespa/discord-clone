(this["webpackJsonpdiscord-clone"]=this["webpackJsonpdiscord-clone"]||[]).push([[3],{129:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(8),a=Object(c.createContext)(null)},191:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var c=n(0),a=n.n(c),r=n(2),s=n(12),i=n(8),o=n(16),u=n(42);function l(e,t,n,c,l){var j=Object(i.useState)(),b=Object(s.a)(j,2),d=b[0],m=b[1],f=Object(i.useState)(["Online"]),p=Object(s.a)(f,2),O=p[0],h=p[1],v=Object(i.useState)(["none"]),x=Object(s.a)(v,2),g=x[0],y=x[1],N=Object(i.useState)([]),w=Object(s.a)(N,2),k=w[0],C=w[1],R=Object(i.useState)([]),S=Object(s.a)(R,2),T=S[0],E=S[1],L=Object(i.useState)([]),M=Object(s.a)(L,2),I=M[0],A=M[1],D=Object(i.useState)(),_=Object(s.a)(D,2),F=_[0],U=_[1],V=Object(i.useMemo)((function(){return null===n||void 0===n?void 0:n.every((function(e){return e.id!==t}))}),[n,t]),B=Object(o.e)(),K=Object(o.f)();return Object(i.useEffect)((function(){e&&n&&Object(r.a)(a.a.mark((function e(){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&V){e.next=2;break}return e.abrupt("return",m());case 2:if(!d){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,Object(u.j)(t);case 7:n=e.sent,c={name:n[0],icon:n[1],defaultRoom:n[2]},m(c),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),l(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})))()}),[e,t,n,d,V,l]),Object(i.useEffect)((function(){if(t&&e)return Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.h)(t,c,y,C,h,E,A);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),l(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))(),function(){Object(u.g)(t,e.uid)}}),[t,V,c,e,l]),Object(i.useEffect)((function(){var t;e&&T&&U(null===(t=T.find((function(t){return t.uid===e.uid})))||void 0===t?void 0:t.role)}),[e,T]),Object(i.useEffect)((function(){if(e&&n&&(K.pathname==="/channels/".concat(t)||K.pathname==="/channels/".concat(t,"/")))if(V){if(!d)return;var c=Object.keys(d.defaultRoom)[0];B.push("/channels/".concat(t,"/").concat(c))}else{var a=n&&Object.keys(null===n||void 0===n?void 0:n.find((function(e){return e.id===t})).defaultRoom)[0];B.replace("/channels/".concat(t,"/").concat(a,"/"))}}),[e,t,n,B,V,d,K.pathname]),{visitingChannel:d,roleList:O,roomCategories:g,roomList:k,userList:T,onlineUsers:I,userRole:F}}},192:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var c=n(0),a=n.n(c),r=n(2),s=n(12),i=n(8),o=n(68),u=n(97),l=n(18);function j(e,t,n,c,j,b){var d=Object(i.useState)([]),m=Object(s.a)(d,2),f=m[0],p=m[1];return Object(i.useEffect)((function(){if(e&&t&&n)return function(){s.apply(this,arguments)}(),Object(r.a)(a.a.mark((function c(){return a.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,Object(o.a)(n),c.next=4,Object(l.b)(e.uid,t,n);case 4:c.next=9;break;case 6:c.prev=6,c.t0=c.catch(0),b(c.t0.message);case 9:case"end":return c.stop()}}),c,null,[[0,6]])})));function s(){return(s=Object(r.a)(a.a.mark((function r(){return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(o.b)(n,c,p,j);case 3:return a.next=5,Object(l.b)(e.uid,t,n);case 5:a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),b(a.t0.message);case 10:case"end":return a.stop()}}),r,null,[[0,7]])})))).apply(this,arguments)}}),[n,t,e,c,j,b]),{msgList:f,submitMsg:function(e,t,n,c){return O.apply(this,arguments)}};function O(){return O=Object(r.a)(a.a.mark((function c(s,i,j,d){var m,f;return a.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return m={msg:s,user:e.uid,replyTo:i||null,mentions:j||null,attachments:d||null,timestamp:Object(u.a)(new Date)},c.next=3,Object(o.c)(n,m);case 3:f=c.sent,j.length>0&&j.forEach(function(){var e=Object(r.a)(a.a.mark((function e(c){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l.k)(c.uid,t,n,f);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),b(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return c.stop()}}),c)}))),O.apply(this,arguments)}}},193:function(e,t,n){"use strict";var c=n(12),a=n(8),r=n(38),s=n(189),i=n(102),o=n(165),u=n(126),l=n(6);t.a=function(e){var t=e.channel,n=e.room,j=e.mentionCount,b=e.isAdmin,d=e.editRoom,m=Object(a.useState)(),f=Object(c.a)(m,2),p=f[0],O=f[1],h=Object(a.useRef)({});return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("li",{className:"room-link-item",children:Object(l.jsxs)(r.c,{to:"/channels/".concat(t.id,"/").concat(n.id),className:"content",activeClassName:"active",children:[Object(l.jsx)("span",{children:n.name}),b&&Object(l.jsx)("div",{className:"actions",children:Object(l.jsx)(i.a,{svg:u.a,elRef:function(e){return h.current.settings=e},onMouseEnter:function(){return O({text:"Edit Room",el:h.current.settings})},onMouseLeave:function(){return O()},onClick:d})}),j&&Object(l.jsx)(s.a,{count:j})]})}),p&&Object(l.jsx)(o.a,{text:p.text,posInfo:p.el.getBoundingClientRect(),direction:"top"})]})}},194:function(e,t,n){},195:function(e,t,n){"use strict";var c=n(15),a=n(56),r=(n(8),n(108)),s=n(6),i=["className","id","user","onClick","selectMention","mention","theme","searchValue","isFocused"];t.a=function(e){var t=e.className,n=(e.id,e.user),o=e.onClick,u=(e.selectMention,e.mention),l=(e.theme,e.searchValue,e.isFocused),j=Object(a.a)(e,i);l&&(t+=" user-focused");var b=n=n||u,d=b.avatar,m=b.color,f=b.status,p=b.displayName;return Object(s.jsxs)("li",Object(c.a)(Object(c.a)({className:"user-wrapper ".concat(t),onClick:o},j),{},{children:[Object(s.jsx)(r.a,{img:d,color:m,userStatus:f}),Object(s.jsxs)("div",{className:"content",children:[Object(s.jsx)("span",{children:p}),Object(s.jsx)("span",{className:"subText"})]})]}))}},196:function(e,t,n){"use strict";n(8),n(256);var c=n(6);t.a=function(e){var t=e.room;return Object(c.jsxs)("section",{className:"top-bar",children:[t&&Object(c.jsx)("header",{className:"room-name-wrapper",children:t.name}),Object(c.jsx)("div",{className:"toolbar",children:t&&Object(c.jsx)("div",{className:"channel-functions"})})]})}},235:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){"use strict";var c=n(0),a=n.n(c),r=n(2),s=n(12),i=n(8),o=n(16),u=n(18),l=n(54),j=n(30),b=n(15),d=n(56),m=n(108),f=(n(257),n.p+"static/media/reply-fill.94bd357e.svg"),p=n(102),O=n(6),h=function(e){var t=e.setReplyTo;return Object(O.jsx)("div",{className:"msg-btns btn-ctn",children:Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("div",{className:"wrapper",children:Object(O.jsx)(p.a,{svg:f,alt:"reply button",onClick:t})})})})},v=(n(258),["displayName","uid","id","mention"]),x=function(e){var t=e.displayName,n=e.uid,c=e.id,a=e.mention,r=Object(d.a)(e,v);return t=t||a.displayName,n=n||a.uid,Object(O.jsxs)("span",{className:"mention-wrapper","data-uid":n,"data-id":c,children:["@",t,Object(O.jsx)("span",{style:{display:"none"},children:r.children})]})},g=n(127),y=n.p+"static/media/attach_file_black_24dp.66ab46ba.svg",N=(n(259),function(e){var t=e.name,n=e.url,c=e.cancel;return Object(O.jsxs)("div",{className:"attachment-wrapper",children:[Object(O.jsxs)("div",{className:"content",children:[Object(O.jsx)("div",{className:"icon-wrapper",children:Object(O.jsx)("img",{src:y,alt:"uploaded file icon"})}),n?Object(O.jsx)("a",{className:"link-wrapper text-wrapper",href:n,children:t}):Object(O.jsx)("div",{className:"text-wrapper",children:t})]}),c&&Object(O.jsx)("div",{className:"actions",children:Object(O.jsx)(p.a,{svg:g.a,onClick:c})})]})}),w=function(e){var t=e.displayName,n=e.avatar,c=e.color,a=e.msg;return Object(O.jsxs)("div",{className:"msg-reply-context",children:[Object(O.jsx)(m.a,{img:n,color:c}),Object(O.jsx)("span",{className:"display-name",children:t}),Object(O.jsx)("div",{className:"replied-text-preview",children:Object(O.jsx)("div",{className:"content",children:a})})]})},k=n(260),C=n(261),R=n(370),S=n(369);function T(e){var t=Object(k.a)(e);return Object(C.a)(t)?"Today at ".concat(Object(S.a)(t,"K':'m a")):Object(R.a)(t)?"Yesterday at ".concat(Object(S.a)(t,"K':'m a")):Object(S.a)(t,"M'/'d'/'y")}var E=function(e){var t=e.displayName,n=e.timestamp;return Object(O.jsxs)("header",{children:[Object(O.jsx)("span",{className:"display-name",children:t}),Object(O.jsx)("span",{className:"timestamp",children:T(n)})]})},L=(n(262),function(e){var t=e.content,n=e.userList,c=e.onReplyTo,a=t.user,r=t.msg,o=t.timestamp,u=t.msgId,j=t.mentions,b=t.attachments,d=t.replyTo,f=Object(i.useState)(!1),p=Object(s.a)(f,2),v=p[0],g=p[1],y=Object(i.useContext)(l.a).user,k=(null===j||void 0===j?void 0:j.some((function(e){return e.uid===y.uid})))||(null===d||void 0===d?void 0:d.user),C=Object(i.useMemo)((function(){return n.find((function(e){return e.uid===a}))}),[n,a]),R=Object(i.useMemo)((function(){return n.find((function(e){return e.uid===(null===d||void 0===d?void 0:d.user)}))}),[n,d]),S=Object(i.useCallback)((function(e,t){if(!t||0===t.length)return e;var c=[],a=[];t.forEach((function(e){a.push(e.range.offset);for(var t=e.range.offset;t<e.range.offset+e.range.length;t++)c.push(t)}));var r=[];return e.split("").forEach((function(e,s){var i=a.indexOf(s);if(-1!==i&&r.push(Object(O.jsx)(x,{displayName:n.find((function(e){return e.uid===t[i].uid})).displayName,uid:t[i].uid},i)),!c.includes(s))return 0===s||c.includes(s-1)?r.push(e):r[r.length-1]=r[r.length-1].concat(e)})),r}),[n]);return Object(O.jsx)("li",{className:k?"chat-msg mentioned":"chat-msg",onMouseOver:function(){return g(!0)},onMouseLeave:function(){return g(!1)},children:Object(O.jsxs)("div",{className:"msg",children:[d&&Object(O.jsx)(w,{displayName:R.displayName,msg:S(d.msg,d.mentions),avatar:R.avatar,color:R.color}),Object(O.jsxs)("div",{className:"content",children:[Object(O.jsx)(m.a,{img:null===C||void 0===C?void 0:C.avatar,color:null===C||void 0===C?void 0:C.color}),Object(O.jsx)(E,{displayName:null===C||void 0===C?void 0:C.displayName,timestamp:o}),Object(O.jsx)("div",{className:"msg-content",children:S(r,j)}),b&&Object(O.jsx)("div",{className:"attachments-ctn",children:b.map((function(e,t){return Object(O.jsx)(N,{url:e.url,name:e.name},t)}))}),v&&Object(O.jsx)(h,{msgId:u,setReplyTo:function(){return c(null===C||void 0===C?void 0:C.displayName,u)}})]})]})})}),M=(n(263),["roomID","msgList","userList"]),I=function(e){var t=e.roomID,n=e.msgList,c=e.userList,o=Object(d.a)(e,M),u=Object(i.useRef)(),l=Object(i.useRef)(),j=Object(i.useState)(!0),m=Object(s.a)(j,2),f=m[0],p=m[1];return Object(i.useEffect)((function(){return function(){return p(!1)}}),[t]),Object(i.useEffect)((function(){!function(){var e;null===(e=u.current)||void 0===e||e.scrollIntoView({behavior:"auto",block:"end",inline:"center",alignToTop:!1})}()}),[n]),Object(O.jsx)("div",{className:"messages-ctn",children:Object(O.jsxs)("div",{className:"scroller",ref:l,style:{opacity:f?1:0},onLoad:Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(l.current);case 2:p(!0);case 3:case"end":return e.stop()}}),e)}))),children:[Object(O.jsx)("div",{className:"scroller-content",children:Object(O.jsx)("ol",{children:n.map((function(e){return Object(O.jsx)(L,Object(b.a)({content:e,userList:c},o),e.msgId)}))})}),Object(O.jsx)("span",{ref:u})]})})};function A(e){return new Promise((function(t){requestAnimationFrame((function c(){if(e.scrollHeight-e.offsetHeight-e.scrollTop<50){if(n++>10)return t();requestAnimationFrame(c)}}));var n=0}))}var D=n(20),_=n(42),F=n(26),U=n(67),V=n.n(U),B=(n(264),function(e){var t=e.displayName,n=e.close;return Object(O.jsx)("div",{className:"reply-bar",children:Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("div",{children:Object(O.jsxs)("div",{className:"content",children:["Replying to"," ",Object(O.jsx)("span",{className:"display-name",children:t})]})}),Object(O.jsx)("div",{className:"actions btn-ctn",children:Object(O.jsx)(p.a,{onClick:n,svg:g.a,className:"close-btn"})})]})})}),K=n(172),H=n(362),P=n(368),q=n(195),J=(n(235),function(e){var t=e.children;return Object(O.jsx)("div",{className:"mentions-popup",children:Object(O.jsxs)("div",{className:"suggestions-wrapper",children:[Object(O.jsx)("header",{children:Object(O.jsx)("h3",{children:"Members"})}),t.length>0?Object(O.jsx)("ul",{children:t}):Object(O.jsx)("div",{className:"text-wrapper",children:Object(O.jsx)("span",{children:"No users match"})})]})})}),W=function(e){var t=e.chatBarInputRef,n=e.roomName,c=e.userList,o=e.replyTo,u=e.setReplyTo,l=e.isAttachments,d=e.getAttachmentsURL,m=e.cleanUpAttachments,f=e.submit,p=Object(i.useState)((function(){return K.EditorState.createEmpty()})),h=Object(s.a)(p,2),v=h[0],g=h[1],y=Object(i.useState)(!1),N=Object(s.a)(y,2),w=N[0],k=N[1],C=Object(i.useState)(c),R=Object(s.a)(C,2),S=R[0],T=R[1],E=Object(i.useContext)(j.a).setError,L=Object(i.useMemo)((function(){var e=Object(P.a)({mentionComponent:x});return{plugins:[e],MentionSuggestions:e.MentionSuggestions}}),[]),M=L.MentionSuggestions,I=L.plugins;return Object(O.jsxs)("div",{className:"input-wrapper",children:[Object(O.jsx)(H.a,{ref:t,editorKey:"editor",editorState:v,onChange:function(e){g(e)},plugins:I,keyBindingFn:function(e){if("Enter"===e.key)return"msg-submit"},handleKeyCommand:function(e){if("msg-submit"===e)!function(){t.apply(this,arguments)}();function t(){return(t=Object(r.a)(a.a.mark((function e(){var t,n,c,r,s,i,j,p,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(){for(var e in n.entityMap)c.push({uid:n.entityMap[e].data.mention.uid});Object.keys(n.blocks[0].entityRanges).forEach((function(e,t){c[t]=Object(b.a)(Object(b.a)({},c[t]),{},{range:n.blocks[0].entityRanges[t]})}))},t=o?o.msgID:null,n=Object(K.convertToRaw)(v.getCurrentContent()),c=[],r(),s=n.blocks[0].text,e.prev=6,l||s){e.next=9;break}return e.abrupt("return");case 9:if(!l){e.next=13;break}return e.next=12,d();case 12:i=e.sent;case 13:return e.next=15,f(s,t,c,i);case 15:m(),u(),j=K.EditorState.push(v,K.ContentState.createFromText("")),p=v.getSelection(),O=K.EditorState.forceSelection(j,p),g(O),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(6),E(e.t0.message);case 26:case"end":return e.stop()}}),e,null,[[6,23]])})))).apply(this,arguments)}},placeholder:"message ".concat(n)}),Object(O.jsx)(M,{open:w,onOpenChange:function(e){k(e)},entryComponent:q.a,popoverContainer:J,suggestions:S,onSearchChange:function(e){var t,n=e.value;T((t=n,c.sort((function(e,t){return e.displayName===t.displayName?0:e.displayName>t.displayName?1:-1})).filter((function(e){var n;return null===(n=e.displayName)||void 0===n?void 0:n.includes(t)})).filter((function(e,t){return t<5}))))},renderEmptyPopup:!0})]})},Y=n(140),z=n(190),G=(n(363),["replyTo","attachments","handleNewAttachments","removeAttachment"]),Q=function(e){var t=e.replyTo,n=e.attachments,c=e.handleNewAttachments,a=e.removeAttachment,r=Object(d.a)(e,G),s=t?{borderTopLeftRadius:0,borderTopRightRadius:0}:{borderTopLeftRadius:"8px",borderTopRightRadius:"8px"};return Object(O.jsxs)("div",{className:"chatbar-content",style:s,children:[Object(O.jsxs)("div",{className:"chatbar-wrapper",children:[Object(O.jsx)("div",{className:"add-wrapper",children:Object(O.jsx)(Y.a,{handleFile:c,actionOnChange:"set attachment",children:Object(O.jsx)("div",{className:"icon-btn",children:Object(O.jsx)("img",{src:z.a,alt:"upload a file"})})})}),Object(O.jsx)(W,Object(b.a)({replyTo:t,isAttachments:n.length>0},r))]}),n.length>0&&Object(O.jsx)("div",{className:"attachments-ctn",children:n.map((function(e,t){return Object(O.jsx)(N,{name:e.name,cancel:function(){return a(e)}},t)}))})]})},X=(n(364),function(e){var t=e.task,n=e.cancel;return Object(O.jsxs)("div",{className:"upload-progress-wrapper",children:[Object(O.jsxs)("div",{className:"content",children:["Uploading ",Object(O.jsx)("span",{className:"text-wrapper",children:t.name}),Object(O.jsxs)("span",{className:"progress-wrapper",children:[t.progress,"%"]})]}),Object(O.jsx)("div",{className:"actions",children:Object(O.jsx)(p.a,{svg:g.a,onClick:n})})]})}),Z=(n(365),["replyTo","setReplyTo"]),$=function(e){var t=e.replyTo,n=e.setReplyTo,c=Object(d.a)(e,Z),o=Object(i.useContext)(j.a).setError,u=Object(i.useState)([]),l=Object(s.a)(u,2),m=l[0],f=l[1],p=Object(i.useState)([]),h=Object(s.a)(p,2),v=h[0],x=h[1],g=Object(i.useRef)();return Object(i.useLayoutEffect)((function(){g.current.style.top="-".concat(g.current.offsetHeight+10,"px")})),Object(O.jsxs)("form",{className:"chat-bar",name:"chat-bar",onSubmit:ee,children:[Object(O.jsx)("div",{className:"upload-tasks-ctn",ref:g,children:v.map((function(e,t){return Object(O.jsx)(X,{task:e},t)}))}),t&&Object(O.jsx)(B,{displayName:t.displayName,close:function(){return n()}}),Object(O.jsx)(Q,Object(b.a)({replyTo:t,attachments:m,handleNewAttachments:function(e){if(5===m.length)return o("Woooaa, that's a lot of files there bud");f((function(t){return[].concat(Object(D.a)(t),[e])}))},removeAttachment:function(e){f((function(t){return t.filter((function(t){return t!==e}))}))},setReplyTo:n,getAttachmentsURL:function(){if(0!==m.length){var e=Object(D.a)(m);return f([]),Promise.all(e.map(function(){var e=Object(r.a)(a.a.mark((function e(t){var n,c,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(_.a)(t),c=V()(),x((function(e){return[].concat(Object(D.a)(e),[{id:c,task:n,name:t.name,progress:t.progress}])})),Object(_.l)(n,(function(e){x((function(t){return t.map((function(t){return t.id===c?Object(b.a)(Object(b.a)({},t),{},{progress:e}):t}))}))})),e.next=6,n;case 6:return e.next=8,Object(F.b)(n.snapshot.ref);case 8:return r=e.sent,e.abrupt("return",{name:t.name,url:r});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}},cleanUpAttachments:function(){return x([])}},c))]})};function ee(e){e.preventDefault()}var te=n(50);t.a=function(e){var t=e.room,n=e.msgList,c=e.userList,b=e.submitMsg,d=e.isVisitor,m=Object(i.useContext)(l.a).user,f=Object(i.useContext)(j.a).setError,p=Object(o.g)().channelID,h=Object(i.useState)(),v=Object(s.a)(h,2),x=v[0],g=v[1],y=Object(i.useRef)();function N(){return(N=Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.j)(m,p);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),f(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return Object(O.jsxs)("main",{id:"chat",children:[Object(O.jsx)(I,{roomID:t.id,msgList:n,userList:c,setReplyTo:g,onReplyTo:function(e,t){g({displayName:e,msgID:t}),y.current.focus()}}),d?Object(O.jsxs)("div",{className:"subscribe-banner",children:[Object(O.jsx)(te.a,{className:"filler",text:"Subscribe",onClick:function(){return N.apply(this,arguments)}}),"to this channel to chat"]}):Object(O.jsx)($,{userList:c,submit:b,roomName:t.name,replyTo:x,setReplyTo:g,chatBarInputRef:y})]})}},238:function(e,t,n){"use strict";var c=n(8),a=(n(255),n(134)),r=n(195),s=n(3),i=n(15),o=n(12);var u=n(6);t.a=function(e){var t=e.list,n=e.roles;n=n||[];var l=Object(c.useRef)({}),j=function(e,t,n){var a=Object(c.useState)({}),r=Object(o.a)(a,2),u=r[0],l=r[1];return Object(c.useEffect)((function(){t.forEach((function(t){if(n){var c=e.filter((function(e){return"Online"===t?!e.role:e.role===t})).length;0===c?n.current[t].classList.add("hidden"):n.current[t].classList.remove("hidden"),l((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(s.a)({},t," - ".concat(c)))}))}}))}),[t,n,e]),u}(t,n,l);return Object(u.jsx)("aside",{className:"users-ctn",children:n.map((function(e,n){return Object(u.jsx)(a.a,{catRef:function(t){return l.current[e]=t},cat:e,headerSubtext:j[e],className:"role-users-wrapper",children:t.filter((function(t){return t.role===e||!t.role&&"Online"===e})).map((function(e){return Object(u.jsx)(r.a,{user:e},e.uid)}))},n)}))})}},239:function(e,t,n){"use strict";var c=n(0),a=n.n(c),r=n(2),s=n(12),i=n(8),o=n(16),u=n(30),l=n(42),j=n(66),b=n(43),d=n(129),m=n(60),f=n(50),p=n(64),O=n(61),h=(n(366),n(367)),v=n(6),x=function(e){var t=e.room,n=Object(o.g)().channelID,c=Object(i.useContext)(d.a).roomCategories,j=Object(i.useContext)(u.a).setError,x=Object(b.a)(),g=x.inputValues,y=x.setInputValues,N=x.handleChange;Object(i.useEffect)((function(){y({room_name:t.name,room_category:t.category})}),[t,y]);var w=Object(i.useRef)();Object(i.useEffect)((function(){return w.current=!0,function(){return w.current=!1}}),[]);var k=Object(m.a)(w),C=k.success,R=k.setSuccess,S=Object(h.useState)(!1),T=Object(s.a)(S,2),E=T[0],L=T[1];return Object(v.jsxs)(v.Fragment,{children:[C&&Object(v.jsx)(O.a,{text:C}),Object(v.jsxs)("section",{className:"room_overview",children:[Object(v.jsx)("header",{children:Object(v.jsx)("h2",{children:"Overview"})}),Object(v.jsx)("div",{className:"inner-content",children:Object(v.jsxs)("form",{className:"fields-ctn",onSubmit:function(){var e=Object(r.a)(a.a.mark((function e(r){var s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),e.prev=1,L(!0),s=g.room_Name,i=g.room_Category,s===t.name){e.next=7;break}return e.next=7,Object(l.o)(n,t.id,s);case 7:if(i!==t.category){e.next=9;break}return e.abrupt("return");case 9:if(-1!==c.indexOf(i)){e.next=12;break}return e.next=12,Object(l.d)(n,i);case 12:return e.next=14,Object(l.n)(n,t.id,i);case 14:w.current&&(L(!1),R("changes saved")),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),j(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),children:[Object(v.jsx)(p.a,{label:"room name",name:"room_name",onChange:N,value:g.room_name}),Object(v.jsx)(p.a,{label:"room category",name:"room_category",onChange:N,value:g.room_category}),Object(v.jsx)("div",{className:"btn-ctn",children:Object(v.jsx)(f.a,{className:"filled",text:"Save changes",type:"submit",loading:E})})]})})]})]})},g=n(58),y=n(52);t.a=function(e){var t=e.room,c=e.close,b=Object(i.useContext)(u.a).SetError,d=Object(o.g)(),m=d.channelID,f=d.roomID,p=Object(j.a)().isMobileCheck.current,O=Object(i.useReducer)((function(e,t){if("swap_to"===t.type)switch(t.payload){case"overview":return"overview";case"delete room":Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l.f)(m,f);case 3:c(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),b(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))();break;default:throw new g.a("that doesn't exist!")}}),"overview"),h=Object(s.a)(O,2),w=h[0],k=h[1];return Object(v.jsx)(y.a,{mobile:function(){return n.e(11).then(n.bind(null,141))},desktop:function(){return n.e(12).then(n.bind(null,145))},isMobile:p,children:function(e){return Object(v.jsx)(e,{close:c,categories:["".concat(t.name),"none"],btnList:[N("overview","".concat(t.name),!0),N("delete room","none")],dispatch:k,children:w&&{overview:Object(v.jsx)(x,{room:t})}[w]})}})};function N(e,t,n){return{text:e,category:t,isDefault:n}}},255:function(e,t,n){},256:function(e,t,n){},257:function(e,t,n){},258:function(e,t,n){},259:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){},364:function(e,t,n){},365:function(e,t,n){},366:function(e,t,n){}}]);
//# sourceMappingURL=3.edbc7156.chunk.js.map